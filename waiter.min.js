!function(t,r){if("function"==typeof define&&define.amd)define(["require"],function(e){var n=r();return e.specified("khoaijs")&&e(["khoaijs"],function(t){t.Waiter=n}),t.Waiter=n,n});else{var e=r();t.Khoai&&(t.Khoai.Waiter=e),t.Waiter=e}}(this,function(){"use strict";function t(){}function r(t){return"[object Array]"===a.call(t)}function e(t){var n=[];if(!t.length)return[];for(var o in t)t.hasOwnProperty(o)&&(r(t[o])?n=n.concat(e(t[o])):n.push(t[o]));return n}var n={},o=0,i=Array.prototype.slice;t.prototype.has=function(t){return n.hasOwnProperty(t)&&("number"!=typeof n[t].times||n[t].times>0)},t.prototype.add=function(t,r,e){var i="waiter_key_"+ ++o;return"number"==typeof r?(r=parseInt(r),r=r!==r?1:Math.max(r,1)):r=!0,n[i]={callback:t,times:r,description:e},i},t.prototype.addOnce=function(t,r){return this.add(t,1,r)},t.prototype.createFunc=function(t,r,e){var n=this.add(t,r,e),o=this;return window[n]=function(t){return function(){return o.run.apply(o,[t].concat(i.call(arguments)))}}(n),n},t.prototype.createFuncOnce=function(t,r){return this.createFunc(t,1,r)},t.prototype.remove=function(){var t,r,o=e(i.call(arguments)),a=[];for(r in o)o.hasOwnProperty(r)&&n.hasOwnProperty(o[r])&&(t=o[r],a.push(t),window[t]=void 0,delete n[t],delete window[t]);return a},t.prototype.run=function(t,r){return this.runInContext.apply(this,[t,null].concat(Array.prototype.slice.call(arguments,1)))},t.prototype.runInContext=function(t,r,e){var o;if(!this.has(t))throw new Error("Waiter key is non-exists: "+t);return e=Array.prototype.slice.call(arguments,2),o=n[t].callback.apply(r||null,e),this.has(t)&&"number"==typeof n[t].times&&--n[t].times<1&&this.remove(t),o},t.prototype.list=function(t){var r={};if(t){for(var e in n)n.hasOwnProperty(e)&&(r[e]=n[e].description);return r}return Object.keys(n)};var a=Object.prototype.toString;return new t});
//# sourceMappingURL=waiter.min.js.map
